---
message: "Setting up Hephaestus"

classes:
  - 'profile::hapcat'
  - 'profile::postgres'
  - 'profile::r10k'

hapcat::database_loadtestdata: true
hapcatdbuser: 'hapcat'
hapcatdb: 'hapcat'
hapcat::database_url: "postgresql+psycopg2://%{lookup('hapcatdbuser')}:%{lookup('hapcatdbpw')}@localhost:5432/%{lookup('hapcatdb')}"


nginx::nginx_servers:
  'hapcat.tenaisenma.com':
    listen_port: 80

nginx::nginx_locations:
  'hapcatroot':
    location: '/'
    server: 'hapcat.tenaisenma.com'
    include:
      - 'uwsgi_params'
    uwsgi: '/run/hapcat.socket'
